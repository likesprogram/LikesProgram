# LikesProgram

## ä»‹ç»
`LikesProgram` æ˜¯ä¸€ä¸ª **C++ é€šç”¨å·¥å…·åº“**ï¼Œæä¾›ä¸°å¯Œã€é«˜æ•ˆä¸”æ˜“ç”¨çš„ç±»åº“å’Œå·¥å…·å‡½æ•°ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨å„ç§é¡¹ç›®ä¸­å‡å°‘é‡å¤ä»£ç ã€æå‡å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¿è¯æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚
æœ¬åº“é¢å‘å¤šç§åœºæ™¯ï¼ŒåŒ…æ‹¬æ€§èƒ½åˆ†æã€æ•°å­¦è®¡ç®—ã€æ—¥å¿—ç®¡ç†ã€å¤šçº¿ç¨‹ä»»åŠ¡è°ƒåº¦ã€å›½é™…åŒ–å­—ç¬¦ä¸²å¤„ç†ç­‰ï¼Œè®¾è®¡æ—¶æ³¨é‡æ˜“ç”¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚

## åŠŸèƒ½æ¦‚è§ˆ
```
LikesProgram
â”œâ”€ Mathï¼ˆæ•°å­¦å·¥å…·ï¼‰
â”‚  â”œâ”€ å¸¸é‡ï¼šPIã€EPSILONã€INF
â”‚  â”œâ”€ å‡½æ•°ï¼šUpdateMaxã€EMAã€NsToMsã€NsToSã€MsToNsã€SToNs
â”‚  â”œâ”€ Vectorï¼ˆäºŒä½å‘é‡ï¼‰
â”‚  â”œâ”€ Vector3ï¼ˆä¸‰ç»´å‘é‡ï¼‰
â”‚  â””â”€ Vector4ï¼ˆå››ç»´å‘é‡ï¼‰
â”œâ”€ Timerï¼ˆé«˜ç²¾åº¦è®¡æ—¶å™¨ï¼‰
â”‚  â”œâ”€ å•çº¿ç¨‹è®¡æ—¶
â”‚  â”œâ”€ å¤šçº¿ç¨‹è®¡æ—¶
â”‚  â””â”€ æ—¶é—´è½¬æ¢ä¸å­—ç¬¦ä¸²è¾“å‡º
â”œâ”€ Unicodeï¼ˆUnicode å·¥å…·é›†ï¼‰
â”‚  â”œâ”€ Caseï¼ˆå¤§å°å†™è½¬æ¢ï¼‰
â”‚  â”‚   â”œâ”€ BMP å­—ç¬¦å¤§/å°å†™æ˜ å°„
â”‚  â”‚   â””â”€ SMP å­—ç¬¦å¤§/å°å†™æ˜ å°„
â”‚  â””â”€ Convertï¼ˆç¼–ç è½¬æ¢ï¼‰
â”‚      â”œâ”€ UTF-8 â‡„ UTF-16 â‡„ UTF-32
â”‚      â””â”€ UTF-16 â‡„ GBK
â”œâ”€ Stringï¼ˆUnicode å­—ç¬¦ä¸²ç±»ï¼‰
â”‚  â”œâ”€ UTF-8 / UTF-16 / UTF-32 æ”¯æŒ
â”‚  â””â”€ ç¼–ç è½¬æ¢å·¥å…·
â”œâ”€ Loggerï¼ˆæ—¥å¿—ç³»ç»Ÿï¼‰
â”‚  â”œâ”€ å¤šçº§åˆ«æ—¥å¿—
â”‚  â””â”€ å¤šç§è¾“å‡ºæ–¹å¼
â”œâ”€ CoreUtilsï¼ˆç³»ç»Ÿä¸è¾…åŠ©å·¥å…·ï¼‰
â”‚  â”œâ”€ è·å–è®¾ç½®ä¸è·å–çº¿ç¨‹åç§°
â”‚  â”œâ”€ è·å–æœ¬æœº MAC åœ°å€
â”‚  â”œâ”€ è·å–æœ¬æœº IP åœ°å€
â”‚  â””â”€ ç”Ÿæˆ UUID
â”œâ”€ ThreadPoolï¼ˆçº¿ç¨‹æ± ç®¡ç†ï¼‰
â””â”€ Configï¼ˆé…ç½®ç®¡ç†ï¼‰
   â”œâ”€ æ”¯æŒç»§æ‰¿ Serializer è‡ªå®šä¹‰åºåˆ—åŒ–æ ¼å¼
   â””â”€ é»˜è®¤ JSON æ”¯æŒ
```

## ä½¿ç”¨é¡»çŸ¥

LikesProgram å¼€æºå¹¶å…è®¸è‡ªç”±ä½¿ç”¨å’ŒäºŒæ¬¡å¼€å‘ï¼Œä½†è¯·æ³¨æ„ï¼š

1. ä½¿ç”¨æœ¬åº“çš„äºŒæ¬¡å¼€å‘æˆ–æ´¾ç”Ÿé¡¹ç›® **å¿…é¡»åœ¨æ–‡æ¡£æˆ–æ˜¾è‘—ä½ç½®æ³¨æ˜**ï¼š
    > â€œæœ¬é¡¹ç›®ä½¿ç”¨äº† LikesProgram åº“ï¼ˆä½œè€…ï¼šé¾™å…µå¯…ï¼Œå®˜ç½‘ï¼š[likesprogram.com](https://likesprogram.com)ï¼ŒGithubï¼š[github.com/likesprogram/LikesProgram](https://github.com/likesprogram/LikesProgram)â€

2. ç¦æ­¢ç”¨äºè¿æ³•ã€ä¾µæƒæˆ–ä¼¤å®³ä»–äººçš„è¡Œä¸ºã€‚
3. æœ¬åº“ä¸ä¿è¯é€‚ç”¨æ€§ã€ç¨³å®šæ€§æˆ–å®‰å…¨æ€§ï¼Œä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…é£é™©ã€‚
4. æœ¬åº“éµå¾ª **BSD 3-Clause License**ã€‚å…è®¸è‡ªç”±ä½¿ç”¨ã€å¤åˆ¶ã€ä¿®æ”¹å’Œåˆ†å‘ï¼Œä½†å¿…é¡»ä¿ç•™ä¸Šè¿°ç½²åå£°æ˜ã€‚

## è®¸å¯è¯

æœ¬åº“é‡‡ç”¨ **BSD 3-Clause License**ï¼Œè¯¦è§ LICENSE æ–‡ä»¶ã€‚

## ä½¿ç”¨è¯´æ˜

### ç¼–è¯‘

1. ç¡®ä¿å·²å®‰è£… [CMake](https://cmake.org/)ï¼ˆâ‰¥ 3.15ï¼‰ï¼Œä»¥åŠ C++20 è¯­è¨€æ”¯æŒ

2. åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª `build` ç›®å½•å¹¶è¿›å…¥ï¼š

   ```bash
   mkdir build
   cd build
   ```

3. è¿è¡Œ CMake é…ç½®å‘½ä»¤ï¼š

   ```bash
   cmake ..
   ```

   å¸¸ç”¨é€‰é¡¹ï¼š

   * `-DBUILD_SHARED_LIBS=[ON|OFF]`
     æ˜¯å¦ç”ŸæˆåŠ¨æ€åº“ï¼ˆONï¼‰æˆ–é™æ€åº“ï¼ˆOFFï¼‰ï¼Œé»˜è®¤ï¼šONï¼ˆåŠ¨æ€åº“ï¼‰ã€‚
   * `-DENABLE_EXAMPLES=[ON|OFF]`
     æ˜¯å¦æ„å»ºç¤ºä¾‹ç¨‹åº `LikesProgramDemo`ï¼Œé»˜è®¤ï¼šOFFã€‚
   * `-DENABLE_STRICT_WARNINGS=[ON|OFF]`
     æ˜¯å¦å¼€å¯ç¼–è¯‘å™¨ä¸¥æ ¼è­¦å‘Šï¼Œé»˜è®¤ï¼šONã€‚

4. å¦‚éœ€ä¿®æ”¹å®‰è£…è·¯å¾„ï¼Œå¯ç¼–è¾‘ `build/cmake_install.cmake` æ–‡ä»¶ï¼Œå°† `CMAKE_INSTALL_PREFIX` è®¾ç½®ä¸ºç›®æ ‡å®‰è£…ç›®å½•ã€‚

5. ç¼–è¯‘å¹¶å®‰è£…ï¼š

   ```bash
   cmake --build . --config Release --target INSTALL
   ```

6. å®‰è£…å®Œæˆåï¼Œåœ¨ `CMAKE_INSTALL_PREFIX` ç›®å½•ä¸‹ä¼šçœ‹åˆ°ï¼š

   ```
   include/   # å¤´æ–‡ä»¶
   lib/       # åº“æ–‡ä»¶ (LikesProgram.lib / LikesProgram.dll æˆ– .a / .so)
   ```

### ä½¿ç”¨æ–¹æ³•

1. åœ¨é¡¹ç›®ä¸­åŒ…å«å¤´æ–‡ä»¶ï¼š

   ```cpp
   #include <LikesProgram/String.hpp>
   #include <LikesProgram/Timer.hpp>
   // ...
   ```
2. é“¾æ¥åº“ï¼š

   * Windows (MSVC)ï¼š

     ```cmake
     target_link_libraries(your_target PRIVATE LikesProgram)
     ```
   * Linux/macOSï¼š

     ```bash
     g++ main.cpp -I/path/to/include -L/path/to/lib -lLikesProgram
     ```

## åŠŸèƒ½è¯¦è§£

### 1ã€Mathï¼šæ•°å­¦å·¥å…·

#### 1.1ã€å¸¸ç”¨å·¥å…·

##### 1.1.1ã€å¸¸é‡å®šä¹‰

* `PI`ï¼šåœ†å‘¨ç‡å¸¸é‡ï¼Œç²¾åº¦é«˜è¾¾ 30 ä½ã€‚
* `EPSILON`ï¼šæµ®ç‚¹æ•°è®¡ç®—ç²¾åº¦é˜ˆå€¼ï¼Œç”¨äºæ¯”è¾ƒè¿‘ä¼¼ç›¸ç­‰ã€‚
* `INF`ï¼šè¡¨ç¤º**æ— ç©·å¤§**ï¼ˆInfinityï¼‰ï¼Œå¸¸ç”¨äºåˆå§‹åŒ–æœ€å¤§å€¼ã€ç®—æ³•çš„â€œå“¨å…µå€¼â€æˆ–éœ€è¦è¡¨ç¤ºâ€œæ— é™å¤§â€çš„åœºæ™¯ã€‚

##### 1.1.2ã€å¸¸ç”¨å‡½æ•°

* `UpdateMax(std::atomic<T1>& target, T2 value)`
  æ›´æ–° `target` çš„å€¼ä¸º `value`ï¼Œä»…åœ¨ `value > target` æ—¶æ›´æ–°ï¼Œçº¿ç¨‹å®‰å…¨ã€‚
  ç”¨é€”ï¼šåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ç»Ÿè®¡æœ€å¤§å€¼ã€‚

* `EMA(T1 previous, T2 value, double alpha = 0.9)`
  è®¡ç®—æŒ‡æ•°ç§»åŠ¨å¹³å‡å€¼ï¼ˆExponential Moving Averageï¼‰ï¼Œå¯ç”¨äºæ€§èƒ½ç›‘æ§æˆ–å¹³æ»‘æ•°æ®ã€‚

  * `previous`ï¼šä¸Šä¸€æ¬¡å€¼
  * `value`ï¼šå½“å‰å€¼
  * `alpha`ï¼šå¹³æ»‘ç³»æ•°ï¼ˆ0-1ï¼‰ï¼Œé»˜è®¤ 0.9

* æ—¶é—´è½¬æ¢å‡½æ•°ï¼šæ–¹ä¾¿åœ¨çº³ç§’ã€æ¯«ç§’ã€ç§’ä¹‹é—´äº’ç›¸è½¬æ¢

  * `NsToMs(long long ns)`ï¼šçº³ç§’ â†’ æ¯«ç§’
  * `NsToS(long long ns)`ï¼šçº³ç§’ â†’ ç§’
  * `MsToNs(long long ms)`ï¼šæ¯«ç§’ â†’ çº³ç§’
  * `MsToS(long long ms)`ï¼šæ¯«ç§’ â†’ ç§’
  * `SToNs(long long s)`ï¼šç§’ â†’ çº³ç§’
  * `SToMs(long long s)`ï¼šç§’ â†’ æ¯«ç§’

##### ä½¿ç”¨ç¤ºä¾‹

```cpp
#include <iostream>
#include <atomic>
#include <LikesProgram/math/Math.hpp>

int main() {
    std::atomic<int> maxVal = 0;
    LikesProgram::Math::UpdateMax(maxVal, 10);
    std::cout << "æœ€å¤§å€¼: " << maxVal << std::endl;

    double ema = LikesProgram::Math::EMA(10, 20, 0.8);
    std::cout << "EMA: " << ema << std::endl;

    long long ns = 1'500'000'000;
    std::cout << "çº³ç§’è½¬ç§’: " << LikesProgram::Math::NsToS(ns) << " s" << std::endl;
}
```

### 1.2ã€Vectorï¼šäºŒç»´å‘é‡ç±»

`Vector` ç±»æä¾›äºŒç»´å‘é‡è¿ç®—çš„æ”¯æŒï¼Œé€‚ç”¨äºå‡ ä½•è®¡ç®—ã€ç‰©ç†æ¨¡æ‹Ÿå’Œæ¸¸æˆå¼€å‘ç­‰åœºæ™¯ã€‚

#### æ„é€ å‡½æ•°

* `Vector()`ï¼šé»˜è®¤æ„é€ ï¼Œåˆå§‹åŒ–ä¸º `(0, 0)`
* `Vector(double x, double y)`ï¼šæŒ‡å®š xã€y åæ ‡
* `explicit Vector(double s)`ï¼šåŒæ—¶åˆå§‹åŒ– x å’Œ y ä¸ºåŒä¸€æ ‡é‡ `s`

#### è¿ç®—ç¬¦é‡è½½

* **æ ‡é‡è¿ç®—**ï¼š

  * `v + s` / `v - s` / `v * s` / `v / s`
  * `v += s` / `v -= s` / `v *= s` / `v /= s`

* **å‘é‡è¿ç®—**ï¼š

  * `v + u` / `v - u` / `v * u` (åˆ†é‡ä¹˜) / `v / u` (åˆ†é‡é™¤)
  * `v += u` / `v -= u` / `v *= u` / `v /= u`

* **ä¸€å…ƒè¿ç®—**ï¼š

  * `-v`ï¼šå–è´Ÿå‘é‡
  * `+v`ï¼šå–æ­£å‘é‡

* **è‡ªå¢è‡ªå‡**ï¼š

  * `++v` / `v++` / `--v` / `v--`

* **æ¯”è¾ƒè¿ç®—**ï¼š

  * `==` / `!=` / `<` / `>` / `<=` / `>=`
  * `<` ä½¿ç”¨å­—å…¸åºæ¯”è¾ƒ

* **ç´¢å¼•è®¿é—®**ï¼š

  * `v[0]` â†’ x
  * `v[1]` â†’ y

* **å‹å…ƒè¿ç®—ç¬¦**ï¼š

  * `operator*(double s, const Vector& v)`ï¼šæ ‡é‡å·¦ä¹˜
  * `operator<<(std::ostream& os, const Vector& v)`ï¼šè¾“å‡ºæ ¼å¼ `(x, y)`

#### å¸¸ç”¨æ–¹æ³•

* `Length()`ï¼šè¿”å›å‘é‡é•¿åº¦
* `Normalized()`ï¼šè¿”å›å•ä½å‘é‡
* `Dot(const Vector& v)`ï¼šç‚¹ç§¯
* `Distance(const Vector& v)`ï¼šä¸¤å‘é‡è·ç¦»
* `Rotated(double angle)`ï¼šé€†æ—¶é’ˆæ—‹è½¬ `angle` å¼§åº¦
* `IsZero()`ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºé›¶å‘é‡
* `Perpendicular()`ï¼šè¿”å›å‚ç›´å‘é‡
* `Clamped(double maxLength)`ï¼šé™åˆ¶å‘é‡æœ€å¤§é•¿åº¦
* `Cross(const Vector& v)`ï¼šäºŒç»´å‰ç§¯ï¼Œè¿”å›æ ‡é‡
* `Angle()`ï¼šè¿”å›æè§’ `atan2(y, x)`
* `AngleBetween(const Vector& v)`ï¼šè¿”å›å¤¹è§’ `[0, pi]`
* `Reflected(const Vector& normal)`ï¼šæ²¿å•ä½æ³•çº¿åå°„
* `Project(const Vector& on)`ï¼šå‘é‡æŠ•å½±
* `Reject(const Vector& on)`ï¼šå‘é‡æ‹’æŠ•å½±ï¼ˆå»æ‰æŠ•å½±éƒ¨åˆ†ï¼‰
* `static Lerp(const Vector& a, const Vector& b, double t)`ï¼šçº¿æ€§æ’å€¼

#### ä½¿ç”¨ç¤ºä¾‹

```cpp
#include <iostream>
#include <random>
#include <LikesProgram/math/Vector.hpp>
#include <LikesProgram/math/Math.hpp>
#include <LikesProgram/Timer.hpp>

namespace VectorTest {
    void StressTest(size_t count = 100000) {
        std::cout << std::endl << "===== éšæœº Stress Test (" << count << " æ¬¡) =====" << std::endl;

        std::mt19937 rng(std::random_device{}());
        std::uniform_real_distribution<double> dist(-1000.0, 1000.0);

        LikesProgram::Timer::Start(); // å¼€å§‹è®¡æ—¶

        LikesProgram::Math::Vector acc(0.0, 0.0); // ç´¯ç§¯ç»“æœ
        for (size_t i = 0; i < count; i++) {
            LikesProgram::Math::Vector a(dist(rng), dist(rng));
            LikesProgram::Math::Vector b(dist(rng), dist(rng));

            // åšä¸€äº›è¿ç®—
            acc += a + b;
            acc -= a - b;
            acc *= 0.5;
            acc += a * b;     // åˆ†é‡ä¹˜
            acc -= a / (b + LikesProgram::Math::Vector(1.0, 1.0)); // é¿å…é™¤ 0
            acc += a.Normalized().Clamped(10.0);
            acc += LikesProgram::Math::Vector::Lerp(a, b, 0.5);
        }


        std::cout << "Stress Test å®Œæˆ" << std::endl;
        std::cout << "æœ€ç»ˆç´¯ç§¯ç»“æœ: " << acc << std::endl;
        std::cout << "è€—æ—¶: " << LikesProgram::Timer::ToString(LikesProgram::Timer::Stop()) << std::endl;
    }

    void BasicOps() {
        std::cout << "===== åŸºæœ¬è¿ç®—ç¬¦æµ‹è¯• =====" << std::endl;
        LikesProgram::Math::Vector a(3.0, 4.0);
        LikesProgram::Math::Vector b(1.0, 2.0);

        std::cout << "a = " << a << ", b = " << b << std::endl;
        std::cout << "a + b = " << (a + b) << std::endl;
        std::cout << "a - b = " << (a - b) << std::endl;
        std::cout << "a * 2 = " << (a * 2.0) << std::endl;
        std::cout << "2 * a = " << (2.0 * a) << std::endl;
        std::cout << "a / 2 = " << (a / 2.0) << std::endl;
        std::cout << "a * b (åˆ†é‡ä¹˜) = " << (a * b) << std::endl;
        std::cout << "a / b (åˆ†é‡é™¤) = " << (a / b) << std::endl;
        std::cout << "-a = " << (-a) << std::endl;
        std::cout << "+a = " << (+a) << std::endl;
    }

    void CompoundOps() {
        std::cout << std::endl << "===== å¤åˆèµ‹å€¼æµ‹è¯• =====" << std::endl;
        LikesProgram::Math::Vector v(2.0, 3.0);
        std::cout << "v = " << v << std::endl;
        v += LikesProgram::Math::Vector(1.0, 1.0);
        std::cout << "v += (1,1) -> " << v << std::endl;
        v -= LikesProgram::Math::Vector(0.5, 0.5);
        std::cout << "v -= (0.5,0.5) -> " << v << std::endl;
        v *= 2.0;
        std::cout << "v *= 2 -> " << v << std::endl;
        v /= 2.0;
        std::cout << "v /= 2 -> " << v << std::endl;
    }

    void MathOps() {
        std::cout << std::endl << "===== æ•°å­¦è¿ç®—æµ‹è¯• =====" << std::endl;
        LikesProgram::Math::Vector a(3.0, 4.0);
        LikesProgram::Math::Vector b(1.0, 0.0);

        std::cout << "a = " << a << ", b = " << b << std::endl;
        std::cout << "Length(a) = " << a.Length() << std::endl;
        std::cout << "a.Normalized() = " << a.Normalized() << std::endl;
        std::cout << "a.Dot(b) = " << a.Dot(b) << std::endl;
        std::cout << "a.Distance(b) = " << a.Distance(b) << std::endl;
        std::cout << "a.Rotated(90Â°) = " << a.Rotated(LikesProgram::Math::PI / 2) << std::endl;
        std::cout << "a.Perpendicular() = " << a.Perpendicular() << std::endl;
        std::cout << "a.Clamped(2.0) = " << a.Clamped(2.0) << std::endl;
        std::cout << "a.Cross(b) = " << a.Cross(b) << std::endl;
        std::cout << "a.Angle() = " << a.Angle() << std::endl;
        std::cout << "a.AngleBetween(b) = " << a.AngleBetween(b) << std::endl;
        std::cout << "a.Reflected(b) = " << a.Reflected(b) << std::endl;
        std::cout << "a.Project(b) = " << a.Project(b) << std::endl;
        std::cout << "a.Reject(b) = " << a.Reject(b) << std::endl;
    }

    void LerpTest() {
        std::cout << std::endl << "===== æ’å€¼æµ‹è¯• =====" << std::endl;
        LikesProgram::Math::Vector a(0.0, 0.0);
        LikesProgram::Math::Vector b(10.0, 10.0);

        for (double t = 0.0; t <= 1.0; t += 0.25) {
            std::cout << "Lerp(a, b, " << t << ") = " << LikesProgram::Math::Vector::Lerp(a, b, t) << std::endl;
        }
    }

    void Test() {
        BasicOps();
        CompoundOps();
        MathOps();
        LerpTest();
        StressTest();
    }
}
```

#### 1.3ã€Vector3ï¼šä¸‰ç»´å‘é‡ç±» (æœªå®Œæˆ)
#### 1.4ã€Vector4ï¼š4ç»´å‘é‡ç±» (æœªå®Œæˆ)

### 2ã€`Timer` â€” é«˜ç²¾åº¦è®¡æ—¶å™¨

`Timer` ç”¨äºæµ‹é‡ä»£ç ç‰‡æ®µçš„è€—æ—¶ï¼Œæ”¯æŒå•çº¿ç¨‹ä¸å¤šçº¿ç¨‹ç¯å¢ƒï¼Œç²¾åº¦å¯è¾¾çº³ç§’çº§ã€‚å®ƒæ—¢èƒ½ä½œä¸ºè½»é‡çš„å±€éƒ¨è®¡æ—¶å™¨ï¼Œä¹Ÿå¯ä»¥åœ¨çˆ¶å¯¹è±¡ä¸­èšåˆå¤šçº¿ç¨‹çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œæ–¹ä¾¿æ€§èƒ½åˆ†æã€è°ƒè¯•å’Œä»»åŠ¡è€—æ—¶ç›‘æ§ã€‚

#### æ„é€ ä¸ç”Ÿå‘½å‘¨æœŸ

* `Timer(bool autoStart = false, Timer* parent = nullptr)`
  åˆ›å»ºè®¡æ—¶å™¨ï¼Œå¯é€‰æ˜¯å¦ç«‹å³å¯åŠ¨ï¼Œå¹¶å¯æŒ‡å®šçˆ¶ `Timer` ç”¨äºæ±‡æ€»ç»Ÿè®¡ã€‚

#### åŸºæœ¬æ“ä½œ

* `Start()`â€ƒå¼€å§‹è®¡æ—¶ã€‚
* `Stop(double alpha = 0.9)`â€ƒåœæ­¢è®¡æ—¶å¹¶è¿”å›æœ¬æ¬¡è€—æ—¶ï¼ŒåŒæ—¶æ›´æ–°ç´¯è®¡æ—¶é—´ã€æœ€é•¿è€—æ—¶å’Œå¹³å‡å€¼ï¼ˆ`alpha` æ§åˆ¶ EMA å¹³æ»‘ç³»æ•°ï¼‰ã€‚
* `Reset()`â€ƒé‡ç½®è®¡æ—¶å™¨çŠ¶æ€ã€‚
* `ResetThread()`â€ƒä»…æ¸…é™¤å½“å‰çº¿ç¨‹çš„æ•°æ®ã€‚
* `ResetGlobal()`â€ƒæ¸…é™¤å…¨å±€ç»Ÿè®¡ä¿¡æ¯ã€‚

#### æŸ¥è¯¢æ¥å£

* `GetLastElapsed() const`â€ƒä¸Šä¸€æ¬¡ `Stop()` çš„è€—æ—¶ã€‚
* `GetTotalElapsed() const`â€ƒç´¯è®¡è€—æ—¶ã€‚
* `GetLongestElapsed() const`â€ƒè®°å½•åˆ°çš„æœ€é•¿è€—æ—¶ã€‚
* `GetEMAAverageElapsed() const`â€ƒæŒ‡æ•°ç§»åŠ¨å¹³å‡è€—æ—¶ã€‚
* `GetArithmeticAverageElapsed() const`â€ƒç®—æœ¯å¹³å‡è€—æ—¶ã€‚
* `IsRunning() const`â€ƒå½“å‰æ˜¯å¦æ­£åœ¨è®¡æ—¶ã€‚

#### å·¥å…·æ–¹æ³•

* `static String ToString(Duration d)`â€ƒå°†æ—¶é—´é—´éš”æ ¼å¼åŒ–ä¸ºæ˜“è¯»å­—ç¬¦ä¸²ã€‚

#### ä½¿ç”¨ç¤ºä¾‹

```cpp
#include <iostream>
#include <thread>
#include <vector>
#include <LikesProgram/Timer.hpp>

namespace TimerTest {
	struct ThreadData {
        LikesProgram::Timer* timer = nullptr;
		size_t index = 0;
	};

	void WorkLoad(ThreadData* data) {
		LikesProgram::Timer threadTimer(true, data->timer); // åˆ›å»ºçº¿ç¨‹è®¡æ—¶å™¨

		// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
		std::this_thread::sleep_for(std::chrono::milliseconds(100 + data->index * 20));

		auto elapsed = threadTimer.Stop(); // åœæ­¢å¹¶è·å–è€—æ—¶
        std::cout << "Thread ã€" << data->index << "ã€‘ï¼š" << LikesProgram::Timer::ToString(elapsed) << std::endl;
	}

    void Test() {
		LikesProgram::Timer timer; // å…¨å±€è®¡æ—¶å™¨

		std::cout << "===== å•çº¿ç¨‹ç¤ºä¾‹ =====" << std::endl;
		{
			timer.Start(); // å¼€å§‹è®¡æ—¶
            std::this_thread::sleep_for(std::chrono::milliseconds(100));

			//std::cout << "æ˜¯å¦è¿è¡Œï¼š" << timer.IsRunning() << std::endl;
			auto elapsed = timer.Stop();
            std::cout << "å•çº¿ç¨‹ï¼š" << LikesProgram::Timer::ToString(elapsed) << std::endl;

			std::cout << "æ˜¯å¦è¿è¡Œï¼š" << timer.IsRunning() << std::endl;
			std::cout << "æœ€è¿‘ä¸€æ¬¡è€—æ—¶ï¼š" << LikesProgram::Timer::ToString(timer.GetLastElapsed()) << std::endl;
		}

		std::cout << std::endl << "===== å¤šçº¿ç¨‹ç¤ºä¾‹ =====" << std::endl;
		{
			const int threadCount = 4;
            std::vector<std::thread> threads;

			// åˆ›å»ºå¤šä¸ªçº¿ç¨‹
			for (size_t i = 0; i < threadCount; i++) {
				ThreadData* data = new ThreadData();
				data->index = i;
                data->timer = &timer;
				threads.emplace_back(WorkLoad, data);
			}

			for (auto& thread : threads) thread.join();
			std::cout << std::endl << "===== æµ‹è¯•ç»“æœ =====" << std::endl;
			std::cout << "çº¿ç¨‹æ€»æ—¶é—´ï¼š" << LikesProgram::Timer::ToString(timer.GetTotalElapsed()) << std::endl;
			std::cout << "æœ€é•¿æ—¶é—´ï¼š" << LikesProgram::Timer::ToString(timer.GetLongestElapsed()) << std::endl;
			std::cout << "EMAå¹³å‡æ—¶é—´ï¼š" << LikesProgram::Timer::ToString(timer.GetEMAAverageElapsed()) << std::endl;
			std::cout << "çº¿ç¨‹ç®—æ•°å¹³å‡æ—¶é—´ï¼š" << LikesProgram::Timer::ToString(timer.GetArithmeticAverageElapsed()) << std::endl;
		}

		std::cout << std::endl << "===== é‡ç½®ç¤ºä¾‹ =====" << std::endl;
		{
			timer.Reset();

			std::cout << "çº¿ç¨‹æ€»æ—¶é—´ï¼š" << LikesProgram::Timer::ToString(timer.GetTotalElapsed()) << std::endl;
			std::cout << "æœ€é•¿æ—¶é—´ï¼š" << LikesProgram::Timer::ToString(timer.GetLongestElapsed()) << std::endl;
			std::cout << "EMAå¹³å‡æ—¶é—´ï¼š" << LikesProgram::Timer::ToString(timer.GetEMAAverageElapsed()) << std::endl;
			std::cout << "çº¿ç¨‹ç®—æ•°å¹³å‡æ—¶é—´ï¼š" << LikesProgram::Timer::ToString(timer.GetArithmeticAverageElapsed()) << std::endl;
		}
    }
}
```

### 3ã€Unicodeï¼šUnicode å·¥å…·é›†

#### 3.1ã€Caseï¼šå¤§å°å†™è½¬æ¢
##### 3.1.1ã€BMP å¤§å°å†™æ˜ å°„
* `BMPToUpper(uint16_t c)` / `BMPToLower(uint16_t c)`
  æ”¯æŒ Basic Multilingual Plane èŒƒå›´å†…å­—ç¬¦ï¼ˆæ‹‰ä¸å­—æ¯ã€å¸Œè…Šå­—æ¯ã€ä¿„æ–‡ç­‰ï¼‰ã€‚

##### 3.1.2ã€SMP å¤§å°å†™æ˜ å°„
* `SMPToUpper(uint32_t c)` / `SMPToLower(uint32_t c)`
  è¦†ç›– Supplementary Multilingual Planeï¼ˆå¦‚å¤æ–‡å­—ã€æ•°å­¦å­—æ¯ç­‰ï¼‰ã€‚

#### 3.2ã€Convertï¼šç¼–ç è½¬æ¢

##### 3.2.1ã€UTF-8 â‡„ UTF-16
* `Utf8ToUtf16(const std::u8string& utf8)`
  UTF-8 è½¬ UTF-16
* `Utf16ToUtf8(const std::u16string& utf16)`
  UTF-16 è½¬ UTF-8

##### 3.2.2ã€UTF-32 â‡„ UTF-16
* `Utf32ToUtf16(const std::u32string& utf32)`
  UTF-32 è½¬ UTF-16
* `Utf16ToUtf32(const std::u16string& utf16)`
  UTF-16 è½¬ UTF-32

##### 3.2.3ã€GBK â‡„ UTF-16
* `GbkToUtf16(const std::string& gbk)`
  GBK è½¬ UTF-16
* `Utf16ToGbk(const std::u16string& utf16)`
  UTF-16 è½¬ GBK

#### 3.3ã€ä½¿ç”¨ç¤ºä¾‹
```cpp
#pragma once
#include <iostream>
#include <iomanip>
#include "../LikesProgram/unicode/Unicode.hpp"

namespace UnicodeTest {
    void TestBMP_AllLatin() {
        std::cout << "\n=== BMP Latin Full ===\n";

        for (char16_t c = u'a'; c <= u'z'; ++c) {
            uint32_t upper = LikesProgram::Unicode::Case::BMPToUpper(c);

            std::cout << (char)c << " -> " << (char)LikesProgram::Unicode::Case::BMPToUpper(c)
            << " : U+" << std::hex << std::uppercase << static_cast<uint32_t>(c)
            << " -> U+" << static_cast<uint32_t>(upper) << "\n";
        }
        for (char16_t c = u'A'; c <= u'Z'; ++c) {
            uint32_t lower = LikesProgram::Unicode::Case::BMPToLower(c);

            std::cout << (char)c << " -> " << (char)LikesProgram::Unicode::Case::BMPToLower(c)
            << " : U+" << std::hex << std::uppercase << static_cast<uint32_t>(c)
            << " -> U+" << static_cast<uint32_t>(lower) << "\n";
        }
    }

    void TestBMP_Extended() {
        std::cout << "\n=== BMP Extended ===\n";
        char16_t samples[] = {
            0x00E1, 0x00C0, 0x00FC, 0x00DF, // Ã¡ Ã€ Ã¼ ÃŸ
            0x0100, 0x0101, 0x0130, 0x0131, // Ä€ Ä Ä° Ä±
            0x03B1, 0x03C9, 0x0391, 0x03A9, // Î± Ï‰ Î‘ Î©
            0x0410, 0x0430                // Ğ Ğ°
        };

        for (auto c : samples) {
            uint32_t u = LikesProgram::Unicode::Case::BMPToUpper(c);
            uint32_t l = LikesProgram::Unicode::Case::BMPToLower(c);
            std::cout << "U+"
                << std::hex << std::uppercase << static_cast<uint32_t>(c)
                << " upper->U+" << u
                << " lower->U+" << l
                << "\n";
        }
    }

    void TestBMP() {
        TestBMP_AllLatin();
        TestBMP_Extended();
    }

    void TestSMP() {
        std::cout << "\n=== SMP Tests ===\n";

        uint32_t samples[] = {
            0x10400, 0x10428, 0x104B0, 0x104D8, // Deseret / Osage
            0x118A0, 0x118C0, 0x118BA, 0x118DA, // Warang Citi
            0x16E40, 0x16E60                  // Medefin / Supplementary examples
        };

        for (auto c : samples) {
            uint32_t u = LikesProgram::Unicode::Case::SMPToUpper(c);
            uint32_t l = LikesProgram::Unicode::Case::SMPToLower(c);
            std::cout << "U+"
                << std::hex << std::uppercase << c
                << " -> upper: U+" << u
                << " lower: U+" << l
                << "\n";
        }
    }

    void ValidateSMP() {
        struct TestCase {
            uint32_t input;
            uint32_t expected_upper;
            uint32_t expected_lower;
        };

        TestCase test_cases[] = {
            {0x10400, 0x10400, 0x10428},
            {0x10428, 0x10400, 0x10428},
            {0x104B0, 0x104B0, 0x104D8},
            {0x104D8, 0x104B0, 0x104D8},
            {0x118A0, 0x118A0, 0x118C0},
            {0x118C0, 0x118A0, 0x118C0},
            {0x118BA, 0x118BA, 0x118DA},
            {0x118DA, 0x118BA, 0x118DA},
            {0x16E40, 0x16E40, 0x16E60},
            {0x16E60, 0x16E40, 0x16E60}
        };

        std::cout << "\n=== SMP Validation ===\n";

        for (auto& tc : test_cases) {
            uint32_t u = LikesProgram::Unicode::Case::SMPToUpper(tc.input);
            uint32_t l = LikesProgram::Unicode::Case::SMPToLower(tc.input);

            std::cout << "0x"
                << std::hex << std::uppercase << tc.input
                << " -> upper: 0x" << u
                << " (expected 0x" << tc.expected_upper << ")"
                << " -> lower: 0x" << l
                << " (expected 0x" << tc.expected_lower << ")";

            if (u != tc.expected_upper || l != tc.expected_lower) {
                std::cout << "  [é”™]";
            }
            else {
                std::cout << "  [å¯¹]";
            }
            std::cout << "\n";
        }
    }
    void TestConvert() {
        std::cout << "\n=== Convert ===\n";
        // UTF-8 â†’ UTF-16
        std::u8string utf8 = u8"ä½ å¥½ï¼ŒUnicodeï¼";
        std::u16string u16 = LikesProgram::Unicode::Convert::Utf8ToUtf16(utf8);
        std::cout << "UTF-8 è½¬ UTF-16 é•¿åº¦: " << std::dec << u16.size() << "\n";

        // UTF-32 â†’ UTF-16
        std::u32string u32 = U"ğ·ğ‘Š"; // Deseret letters
        std::u16string u16_from32 = LikesProgram::Unicode::Convert::Utf32ToUtf16(u32);
        std::cout << "UTF-32 è½¬ UTF-16 é•¿åº¦: " << u16_from32.size() << "\n";

        // UTF-16 â†’ UTF-8
        std::u8string backToUtf8 = LikesProgram::Unicode::Convert::Utf16ToUtf8(u16);
        std::cout << "UTF-16 è½¬ UTF-8: " << backToUtf8.size() << "\n";

        // UTF-16 â†’ UTF-32
        std::u32string backToUtf32 = LikesProgram::Unicode::Convert::Utf16ToUtf32(u16_from32);
        std::cout << "UTF-16 è½¬ UTF-32 é•¿åº¦: " << backToUtf32.size() << "\n";

        // UTF-16 â†” GBK ï¼ˆä»…åœ¨ Windows æˆ–å¯ç”¨ iconv çš„å¹³å°å¯ç”¨ï¼‰
        std::u16string chinese16 = u"æ±‰å­—";
        std::string gbk = LikesProgram::Unicode::Convert::Utf16ToGbk(chinese16);
        std::u16string backToUtf16 = LikesProgram::Unicode::Convert::GbkToUtf16(gbk);
        std::cout << "GBK å¾€è¿”é•¿åº¦: " << backToUtf16.size() << "\n";
        std::cout << "Utf16: ";
        for (char16_t c : backToUtf16) {
            std::cout << std::hex << std::showbase << (uint16_t)c << ' ';
        }
        std::cout << '\n';
        std::cout << "GBK: ";
        for (unsigned char c : gbk) {
            std::cout << std::hex << std::showbase << (int)c << ' ';
        }
        std::cout << std::dec << std::noshowbase << '\n';
    }

    void Test() {
        TestBMP();
        TestSMP();
        ValidateSMP();
        TestConvert();
    }
}
```

### 4ã€Stringï¼šUnicode å­—ç¬¦ä¸²ç±»

`String` ç±»æä¾›å¯¹å¤šç§ç¼–ç çš„ Unicode å­—ç¬¦ä¸²çš„å°è£…ï¼Œå†…éƒ¨ç»Ÿä¸€ä»¥ UTF-16 å­˜å‚¨ï¼Œæ”¯æŒå­—ç¬¦è®¿é—®ã€å­ä¸²æ“ä½œã€å¤§å°å†™è½¬æ¢ã€æŸ¥æ‰¾å’Œåˆ†å‰²ç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äºæ–‡æœ¬å¤„ç†ã€æ–‡ä»¶è§£æå’Œç½‘ç»œé€šä¿¡ç­‰åœºæ™¯ã€‚

#### æ„é€ å‡½æ•°

* `String()`ï¼šé»˜è®¤æ„é€ ï¼Œåˆ›å»ºç©ºå­—ç¬¦ä¸²
* `explicit String(const char* s, Encoding enc = Encoding::UTF8)`ï¼šä» C é£æ ¼å­—ç¬¦ä¸²æ„é€ ï¼Œé»˜è®¤æŒ‰ UTF-8 è§£æ
* `String(const char8_t* s)`ï¼šä» UTF-8 å­—ç¬¦ä¸²æ„é€ 
* `String(const char16_t* s)`ï¼šä» UTF-16 å­—ç¬¦ä¸²æ„é€ 
* `String(const char32_t* s)`ï¼šä» UTF-32 å­—ç¬¦ä¸²æ„é€ 
* `String(const String& other)`ï¼šæ‹·è´æ„é€ 
* `String(String&& other) noexcept`ï¼šç§»åŠ¨æ„é€ 
* `String(const char8_t c)`ï¼šæ„é€ å•å­—ç¬¦ UTF-8 å­—ç¬¦ä¸²
* `String(const char16_t c)`ï¼šæ„é€ å•å­—ç¬¦ UTF-16 å­—ç¬¦ä¸²
* `String(const size_t count, const char16_t c)`ï¼šæ„é€ æŒ‡å®šæ•°é‡çš„ç›¸åŒå­—ç¬¦çš„å­—ç¬¦ä¸²
* `String(const char32_t c)`ï¼šæ„é€ å•å­—ç¬¦ UTF-32 å­—ç¬¦ä¸²
* `explicit String(const std::string& s, Encoding enc = Encoding::UTF8)`ï¼šä» std::string æ„é€ 
* `explicit String(const std::u8string& s)`ï¼šä» std::u8string æ„é€ 
* `explicit String(const std::wstring& s)`ï¼šä» std::wstring æ„é€ 
* `explicit String(const std::u16string& s)`ï¼šä» std::u16string æ„é€ 
* `explicit String(const std::u32string& s)`ï¼šä» std::u32string æ„é€ 

#### è¾“å…¥ä¸è¾“å‡º

* `std::ostream& operator<<(std::ostream& os, const String& str)`ï¼šè¾“å‡º
* `std::istream& operator>>(std::istream& is, String& str)`ï¼šè¾“å…¥
* `std::wostream& operator<<(std::wostream& os, const String& str)`ï¼šè¾“å‡º
* `std::wistream& operator>>(std::wistream& is, String& str)`ï¼šè¾“å…¥

#### èµ‹å€¼æ“ä½œ

* `String& operator=(const String& other)`ï¼šæ‹·è´èµ‹å€¼
* `String& operator=(String&& other) noexcept`ï¼šç§»åŠ¨èµ‹å€¼

#### å­—ç¬¦ä¸é•¿åº¦è®¿é—®

* `size_t Size() const`ï¼šè¿”å›å­—ç¬¦æ•°é‡ï¼ˆUnicode awareï¼‰
* `size_t Length() const`ï¼šåŒ `Size()`
* `bool Empty() const`ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º
* `void Clear()`ï¼šæ¸…ç©ºå­—ç¬¦ä¸²
* `char32_t At(size_t index) const`ï¼šå®‰å…¨è®¿é—®æŒ‡å®šç´¢å¼•å­—ç¬¦
* `char32_t Front() const`ï¼šè·å–ç¬¬ä¸€ä¸ªå­—ç¬¦
* `char32_t Back() const`ï¼šè·å–æœ€åä¸€ä¸ªå­—ç¬¦

#### æ‹¼æ¥ä¸å­ä¸²æ“ä½œ

* `String& Append(const String& str)`ï¼šè¿½åŠ å­—ç¬¦ä¸²
* `String& operator+=(const String& str)`ï¼šè¿½åŠ å­—ç¬¦ä¸²
* `String SubString(size_t index, size_t count) const`ï¼šè·å–æŒ‡å®šèŒƒå›´å­ä¸²
* `String Left(size_t count) const`ï¼šæˆªå–å·¦ä¾§å­ä¸²
* `String Right(size_t count) const`ï¼šæˆªå–å³ä¾§å­ä¸²

#### å¤§å°å†™è½¬æ¢

* `String ToUpper() const`ï¼šè¿”å›å¤§å†™å­—ç¬¦ä¸²
* `String ToLower() const`ï¼šè¿”å›å°å†™å­—ç¬¦ä¸²
* `void ToUpperInPlace()`ï¼šåŸåœ°è½¬æ¢ä¸ºå¤§å†™
* `void ToLowerInPlace()`ï¼šåŸåœ°è½¬æ¢ä¸ºå°å†™

#### æŸ¥æ‰¾ä¸åŒ¹é…

* `size_t Find(const String& str, size_t start = 0) const`ï¼šæŸ¥æ‰¾å­ä¸²
* `size_t LastFind(const String& str, size_t start = 0) const`ï¼šåå‘æŸ¥æ‰¾å­ä¸²
* `bool StartsWith(const String& str) const`ï¼šåˆ¤æ–­æ˜¯å¦ä»¥æŒ‡å®šå­ä¸²å¼€å¤´
* `bool EndsWith(const String& str) const`ï¼šåˆ¤æ–­æ˜¯å¦ä»¥æŒ‡å®šå­ä¸²ç»“å°¾
* `bool EqualsIgnoreCase(const String& other) const`ï¼šå¿½ç•¥å¤§å°å†™æ¯”è¾ƒ

#### è¿ç®—ç¬¦é‡è½½

* æ¯”è¾ƒè¿ç®—ï¼š`==` / `!=` / `<` / `<=` / `>` / `>=`
  `<` é‡‡ç”¨å­—å…¸åºæ¯”è¾ƒ
* æ‹¼æ¥è¿ç®—ï¼š`operator+=`
* è¿­ä»£å™¨æ”¯æŒèŒƒå›´ for å¾ªç¯ï¼š`begin()` / `end()`

#### è½¬æ¢å‡½æ•°

* `std::string ToStdString(Encoding enc = Encoding::UTF8) const`ï¼šè½¬æ¢ä¸º std::string
* `std::wstring ToWString() const`ï¼šè½¬æ¢ä¸º std::wstring
* `std::u16string ToU16String() const`ï¼šè½¬æ¢ä¸º std::u16string
* `std::u32string ToU32String() const`ï¼šè½¬æ¢ä¸º std::u32string

#### åˆ†å‰²æ“ä½œ

* `std::vector<String> Split(const String& sep) const`ï¼šæŒ‰æŒ‡å®šåˆ†éš”ç¬¦æ‹†åˆ†å­—ç¬¦ä¸²

#### ä½¿ç”¨ç¤ºä¾‹

```cpp
#pragma once
#include <iostream>
#include <LikesProgram/String.hpp>

namespace StringTest {
    // è¾“å…¥è¾“å‡ºæµ‹è¯•
    void OutAndIn() {
        std::cout << "===== è¾“å‡ºè¾“å‡ºç¤ºä¾‹ =====" << std::endl;
#ifdef _WIN32
        LikesProgram::String str1("", LikesProgram::String::Encoding::GBK); // Windows æ§åˆ¶å°è¾“å…¥éœ€è¦å…ˆè®¾ç½®ç¼–ç ä¸º GBKï¼ŒLinux æ§åˆ¶å°è¾“å…¥å¯ä½¿ç”¨é»˜è®¤ UTF-8
#else
        LikesProgram::String str1; // Linux æ§åˆ¶å°è¾“å…¥å¯ä½¿ç”¨é»˜è®¤ UTF-8
#endif
        std::cout << "è¯·è¾“å…¥å­—ç¬¦ä¸²[cin]ï¼š";
        std::cin >> str1;
        std::cout << "[cout]ï¼š" << str1 << "\n";

        LikesProgram::String str2;
        std::cout << "è¯·è¾“å…¥å­—ç¬¦ä¸²[wcin]ï¼š";
        std::wcin >> str2;
        std::wcout << "[wcout]ï¼š" << str2 << "\n";
    }

    void Test() {
        OutAndIn();
        std::cout << "===== å…¶ä»–ç¤ºä¾‹ =====" << std::endl;
        // æ„é€ æµ‹è¯•
        LikesProgram::String s1(u"Hello ä¸–ç•Œ");      // UTF-16
        LikesProgram::String s2("hello world");      // UTF-8 é»˜è®¤
        LikesProgram::String s3(U"ğŸŒŸæ˜Ÿ");           // UTF-32 emoji + ä¸­æ–‡
        LikesProgram::String s4 = s1;                // æ‹·è´æ„é€ 
        LikesProgram::String s5 = std::move(s2);     // ç§»åŠ¨æ„é€ 

        std::cout << "s1 size: " << s1.Size() << "\n"; // Unicode code points
        std::cout << "s3 size: " << s3.Size() << "\n";

        // æ‹¼æ¥
        s1.Append(s3);
        std::cout << "After append, s1 size: " << s1.Size() << "\n";

        // å­ä¸²
        LikesProgram::String sub = s1.SubString(0, 5);
        std::cout << "SubString(0,5) size: " << sub.Size() << "\n";

        // å¤§å°å†™è½¬æ¢
        LikesProgram::String upper = s1.ToUpper();
        LikesProgram::String lower = s1.ToLower();
#ifdef _WIN32
        std::cout << "upper: " << upper.ToStdString(LikesProgram::String::Encoding::GBK) << "\n";
        std::cout << "lower: " << lower.ToStdString(LikesProgram::String::Encoding::GBK) << "\n";
#else
        std::cout << "upper: " << upper.ToStdString() << "\n";
        std::cout << "lower: " << lower.ToStdString() << "\n";
#endif

        // æŸ¥æ‰¾
        size_t idx = s1.Find(LikesProgram::String(u"ä¸–ç•Œ"));
        std::cout << "Find 'ä¸–ç•Œ': " << idx << "\n";

        size_t last_idx = s1.LastFind(LikesProgram::String(u"æ˜Ÿ"));
        std::cout << "LastFind 'æ˜Ÿ': " << last_idx << "\n";

        // StartsWith / EndsWith
        std::cout << "StartsWith 'Hello': " << s1.StartsWith(LikesProgram::String(u"Hello")) << "\n";
        std::cout << "EndsWith 'æ˜Ÿ': " << s1.EndsWith(LikesProgram::String(U"æ˜Ÿ")) << "\n";

        // å¿½ç•¥å¤§å°å†™æ¯”è¾ƒ
        LikesProgram::String cmp1("Test");
        LikesProgram::String cmp2("tEsT");
        std::cout << "EqualsIgnoreCase: " << cmp1.EqualsIgnoreCase(cmp2) << "\n";

        // è¿­ä»£å™¨
        std::cout << "Iterate code points: ";
        for (auto cp : s1) {
            std::cout << std::hex << "U+" << static_cast<uint32_t>(cp) << " ";
        }
        std::cout << "\n";

        // åˆ†å‰²
        LikesProgram::String s6("a,b,c,d");
        auto parts = s6.Split(LikesProgram::String(u","));
        std::cout << "Split: ";
        for (auto& p : parts) {
            std::cout << p.ToStdString() << " ";
        }
        std::cout << "\n";
    }
}
```

### 5ã€CoreUtilsï¼šè¾…åŠ©å·¥å…·ç±»

#### 5.1ã€çº¿ç¨‹å·¥å…·
* `SetCurrentThreadName(const LikesProgram::String& name)`
  å°†å½“å‰çº¿ç¨‹å‘½åã€‚
  ç”¨é€”ï¼šè°ƒè¯•å’Œæ—¥å¿—åŒºåˆ†çº¿ç¨‹ã€‚

* `LikesProgram::String GetCurrentThreadName()`
  è·å–å½“å‰çº¿ç¨‹çš„åç§°ã€‚
  ç”¨é€”ï¼šè°ƒè¯•å’Œæ—¥å¿—åŒºåˆ†çº¿ç¨‹ã€‚

#### 5.2ã€ç½‘ç»œå·¥å…·

* `LikesProgram::String GetMACAddress()`
  è¿”å›æœ¬æœºç½‘ç»œæ¥å£çš„ MAC åœ°å€ã€‚
  ç”¨é€”ï¼šå”¯ä¸€æ ‡è¯†æœºå™¨ï¼Œç½‘ç»œæ³¨å†Œæˆ–æ—¥å¿—è¿½è¸ªã€‚

* `LikesProgram::String GetLocalIPAddress()`
  è¿”å›æœ¬æœº IPv4 åœ°å€ã€‚
  ç”¨é€”ï¼šæœ¬æœºç½‘ç»œé€šä¿¡æˆ–æ—¥å¿—è®°å½•ã€‚

#### 5.3ã€UUID å·¥å…·

* `LikesProgram::String GenerateUUID(LikesProgram::String prefix = u"")`
  ç”Ÿæˆå…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆUUIDï¼‰ï¼Œå¯åŠ å¯é€‰å‰ç¼€ã€‚
  ç”¨é€”ï¼šå”¯ä¸€æ ‡è¯†å¯¹è±¡ã€ä¼šè¯æˆ–æ•°æ®è®°å½•ã€‚

#### 5.4ã€ç¤ºä¾‹

```cpp
#include <iostream>
#include <LikesProgram/CoreUtils.hpp>

int main() {
    // è®¾ç½®çº¿ç¨‹å
    LikesProgram::CoreUtils::SetCurrentThreadName(u"MainThread");
    std::wcout << L"çº¿ç¨‹å: " << LikesProgram::CoreUtils::GetCurrentThreadName().ToWString() << std::endl;

    // è·å– MAC å’Œ IP
    std::wcout << L"MAC: " << LikesProgram::CoreUtils::GetMACAddress().ToWString() << std::endl;
    std::wcout << L"IP: " << LikesProgram::CoreUtils::GetLocalIPAddress().ToWString() << std::endl;

    // ç”Ÿæˆ UUID
    auto uuid = LikesProgram::CoreUtils::GenerateUUID(u"user_");
    std::wcout << L"UUID: " << uuid.ToWString() << std::endl;
}
```

### 6ã€Loggerï¼šçµæ´»çš„æ—¥å¿—ç³»ç»Ÿ

`Logger` æä¾›äº†çº¿ç¨‹å®‰å…¨çš„æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§æ—¥å¿—çº§åˆ«ã€å¯æ‰©å±•çš„æ—¥å¿—è¾“å‡ºç›®æ ‡ï¼ˆSinkï¼‰ï¼Œå¹¶å¯åœ¨åå°å¼‚æ­¥å¤„ç†æ—¥å¿—ã€‚å®ƒé‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼Œä¿è¯å…¨å±€å”¯ä¸€å®ä¾‹ã€‚

#### æ—¥å¿—çº§åˆ«

* `Trace`â€ƒæœ€è¯¦ç»†çš„æ—¥å¿—ï¼Œç”¨äºè·Ÿè¸ªç¨‹åºç»†ç²’åº¦è¡Œä¸º
* `Debug`â€ƒå¼€å‘é˜¶æ®µæœ‰ç”¨çš„ä¿¡æ¯
* `Info`â€ƒç¨‹åºè¿è¡Œæ—¶ä¿¡æ¯ï¼Œè¡¨ç¤ºæ­£å¸¸çŠ¶æ€
* `Warn`â€ƒè­¦å‘Šä¿¡æ¯ï¼Œå¯èƒ½å­˜åœ¨æ½œåœ¨é—®é¢˜
* `Error`â€ƒé”™è¯¯ä¿¡æ¯ï¼ŒæŸäº›åŠŸèƒ½å¯èƒ½å¤±æ•ˆ
* `Fatal`â€ƒè‡´å‘½é”™è¯¯ï¼Œç¨‹åºæ— æ³•ç»§ç»­è¿è¡Œ

#### æ ¸å¿ƒç»“æ„

* `Logger::LogMessage`
  ä»£è¡¨ä¸€æ¡æ—¥å¿—ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¿¡æ¯ï¼š

  * `level`â€ƒæ—¥å¿—çº§åˆ«
  * `msg`â€ƒæ—¥å¿—å†…å®¹
  * `file`â€ƒæºæ–‡ä»¶å
  * `line`â€ƒä»£ç è¡Œå·
  * `func`â€ƒå‡½æ•°å
  * `tid`â€ƒçº¿ç¨‹ ID
  * `threadName`â€ƒçº¿ç¨‹åç§°
  * `timestamp`â€ƒæ—¥å¿—æ—¶é—´

* `Logger::ILogSink`
  æ—¥å¿—è¾“å‡ºæ¥å£ï¼ˆæŠ½è±¡ç±»ï¼‰ï¼Œå­ç±»å®ç° `Write()` æ–¹æ³•å®Œæˆæ—¥å¿—å†™å…¥ã€‚
  æä¾›è¾…åŠ©å‡½æ•°ï¼š

  * `FormatLogMessage()`â€ƒæ ¼å¼åŒ–æ—¥å¿—å†…å®¹
  * `LevelToString()`â€ƒå°†æ—¥å¿—çº§åˆ«è½¬å­—ç¬¦ä¸²

#### è·å–ä¸é…ç½®

* `Logger& Logger::Instance()`
  è·å–å…¨å±€å”¯ä¸€å®ä¾‹ï¼ˆå•ä¾‹ï¼‰ã€‚

* `void SetLevel(LogLevel level)`
  è®¾ç½®æ—¥å¿—æœ€ä½çº§åˆ«ï¼Œä½äºè¯¥çº§åˆ«çš„æ—¥å¿—å°†è¢«è¿‡æ»¤ã€‚

* `void SetEncoding(String::Encoding encoding)`
  è®¾ç½®æ—¥å¿—è¾“å‡ºç¼–ç ï¼ˆUTF-8/UTF-16 ç­‰ï¼‰ã€‚

* `void AddSink(std::shared_ptr<ILogSink> sink)`
  æ·»åŠ ä¸€ä¸ªæ—¥å¿—è¾“å‡ºç›®æ ‡ï¼Œå¯æ·»åŠ å¤šä¸ª Sinkã€‚

#### è®°å½•æ—¥å¿—

* `void Log(LogLevel level, const String& msg, const char* file, int line, const char* func)`
  è®°å½•ä¸€æ¡æ—¥å¿—ã€‚
  æ¨èä½¿ç”¨å®æ¥å£å¿«é€Ÿè®°å½•ï¼š

  ```cpp
  LOG_TRACE(msg);
  LOG_DEBUG(msg);
  LOG_INFO(msg);
  LOG_WARN(msg);
  LOG_ERROR(msg);
  LOG_FATAL(msg);
  ```

#### ç®¡ç†ä¸ç”Ÿå‘½å‘¨æœŸ

* `void Shutdown()`
  åœæ­¢æ—¥å¿—ç³»ç»Ÿï¼Œç»“æŸåå°çº¿ç¨‹å¹¶æ¸…ç†èµ„æºã€‚

#### å·¥å‚å‡½æ•°

* `std::shared_ptr<Logger::ILogSink> CreateConsoleSink()`
  åˆ›å»ºæ§åˆ¶å°è¾“å‡º Sinkã€‚

* `std::shared_ptr<Logger::ILogSink> CreateFileSink(const String& filename)`
  åˆ›å»ºæ–‡ä»¶è¾“å‡º Sinkï¼Œå†™å…¥æŒ‡å®šæ–‡ä»¶ã€‚

#### ä½¿ç”¨ç¤ºä¾‹

```cpp
#include <LikesProgram/Logger.hpp>
#include <LikesProgram/String.hpp>

namespace LoggerTest {
    // è‡ªå®šä¹‰ç½‘ç»œè¾“å‡º Sink
    class NetworkSink : public LikesProgram::Logger::ILogSink {
    public:
        NetworkSink(const std::string& serverAddress) : server(serverAddress) {}

        void Write(const LikesProgram::Logger::LogMessage& message,
            LikesProgram::Logger::LogLevel minLevel,
            LikesProgram::String::Encoding encoding) override {
            LikesProgram::String formatted = FormatLogMessage(message, minLevel);
            SendToServer(formatted.ToStdString(encoding));
        }

    private:
        std::string server;

        void SendToServer(const std::string& payload) {
            // è¿™é‡Œå¯ä»¥å®ç° HTTP/TCP å‘é€é€»è¾‘
            // ç¤ºä¾‹ä¸­ä»…æ‰“å°åˆ°æ§åˆ¶å°è¡¨ç¤ºå‘é€
            std::cout << "[SEND TO SERVER " << server << "] " << payload << std::endl;
        }
    };

    // å·¥å‚å‡½æ•°
    std::shared_ptr<LikesProgram::Logger::ILogSink> CreateNetworkSink(const std::string& serverAddress) {
        return std::make_shared<NetworkSink>(serverAddress);
    }

	void Test() {
        // åˆå§‹åŒ–æ—¥å¿—
        auto& logger = LikesProgram::Logger::Instance();
#ifdef _WIN32
        logger.SetEncoding(LikesProgram::String::Encoding::GBK);
#endif
#ifdef _DEBUG
        logger.SetLevel(LikesProgram::Logger::LogLevel::Debug);
#else
        logger.SetLevel(LogLevel::Info);
#endif
        // å†…ç½®æ§åˆ¶å°è¾“å‡º Sink
        logger.AddSink(LikesProgram::Logger::CreateConsoleSink()); // è¾“å‡ºåˆ°æ§åˆ¶å°
        // å†…ç½®è¾“å‡ºåˆ°æ–‡ä»¶ Sink
        logger.AddSink(LikesProgram::Logger::CreateFileSink(u"app.log")); // è¾“å‡ºåˆ°æ–‡ä»¶
        // è‡ªå®šä¹‰ç½‘ç»œè¾“å‡º Sink
        logger.AddSink(CreateNetworkSink("127.0.0.1:9000")); // è‡ªå®šä¹‰è¾“å‡º Sink
#ifdef _DEBUG
        LOG_TRACE(u"trace message æ—¥å¿—è¾“å‡º");   // ä¸ä¼šè¾“å‡º
        LOG_DEBUG(u"debug message æ—¥å¿—è¾“å‡º");   // ä¼šè¾“å‡º
        LOG_INFO(u"info message æ—¥å¿—è¾“å‡º");     // ä¼šè¾“å‡º
        LOG_WARN(u"warn message æ—¥å¿—è¾“å‡º");     // ä¼šè¾“å‡º
        LOG_ERROR(u"error message æ—¥å¿—è¾“å‡º");   // ä¼šè¾“å‡º
        LOG_FATAL(u"fatal message æ—¥å¿—è¾“å‡º");   // ä¼šè¾“å‡º
#else
        LOG_TRACE(u"trace message æ—¥å¿—è¾“å‡º");   // ä¸ä¼šè¾“å‡º
        LOG_DEBUG(u"debug message æ—¥å¿—è¾“å‡º");   // ä¸ä¼šè¾“å‡º
        LOG_INFO(u"info message æ—¥å¿—è¾“å‡º");     // ä¼šè¾“å‡º
        LOG_WARN(u"warn message æ—¥å¿—è¾“å‡º");     // ä¼šè¾“å‡º
        LOG_ERROR(u"error message æ—¥å¿—è¾“å‡º");   // ä¼šè¾“å‡º
        LOG_FATAL(u"fatal message æ—¥å¿—è¾“å‡º");   // ä¼šè¾“å‡º
#endif

        // è®¾ç½®çº¿ç¨‹å
        LikesProgram::CoreUtils::SetCurrentThreadName(u"ä¸»çº¿ç¨‹");
#ifdef _DEBUG
        LOG_TRACE(u"trace message æ—¥å¿—è¾“å‡º");   // ä¸ä¼šè¾“å‡º
        LOG_DEBUG(u"debug message æ—¥å¿—è¾“å‡º");   // ä¼šè¾“å‡º
        LOG_INFO(u"info message æ—¥å¿—è¾“å‡º");     // ä¼šè¾“å‡º
        LOG_WARN(u"warn message æ—¥å¿—è¾“å‡º");     // ä¼šè¾“å‡º
        LOG_ERROR(u"error message æ—¥å¿—è¾“å‡º");   // ä¼šè¾“å‡º
        LOG_FATAL(u"fatal message æ—¥å¿—è¾“å‡º");   // ä¼šè¾“å‡º
#else
        LOG_TRACE(u"trace message æ—¥å¿—è¾“å‡º");   // ä¸ä¼šè¾“å‡º
        LOG_DEBUG(u"debug message æ—¥å¿—è¾“å‡º");   // ä¸ä¼šè¾“å‡º
        LOG_INFO(u"info message æ—¥å¿—è¾“å‡º");     // ä¼šè¾“å‡º
        LOG_WARN(u"warn message æ—¥å¿—è¾“å‡º");     // ä¼šè¾“å‡º
        LOG_ERROR(u"error message æ—¥å¿—è¾“å‡º");   // ä¼šè¾“å‡º
        LOG_FATAL(u"fatal message æ—¥å¿—è¾“å‡º");   // ä¼šè¾“å‡º
#endif
        std::this_thread::sleep_for(std::chrono::seconds(1)); // ç»™åå°çº¿ç¨‹ä¸€ç‚¹æ—¶é—´è¾“å‡º
        logger.Shutdown();
	}
}
```

### 7ã€ThreadPoolï¼šçº¿ç¨‹æ±  

`ThreadPool` æä¾›äº†ä¸€ä¸ªå¯é…ç½®ã€åŠ¨æ€ä¼¸ç¼©çš„çº¿ç¨‹æ± ï¼Œæ”¯æŒä»»åŠ¡æ’é˜Ÿã€å¼‚æ­¥æäº¤ã€ä»»åŠ¡æ‹’ç»ç­–ç•¥åŠè¿è¡Œæ—¶ç»Ÿè®¡ä¿¡æ¯ã€‚å®ƒé€‚åˆå¤„ç†é«˜å¹¶å‘ä»»åŠ¡ï¼Œå¹¶æä¾›çº¿ç¨‹å®‰å…¨çš„æ“ä½œæ¥å£ã€‚

#### æ‹’ç»ç­–ç•¥ï¼ˆRejectPolicyï¼‰

å½“ä»»åŠ¡é˜Ÿåˆ—æ»¡æ—¶ï¼Œå¯é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š

* `Block`â€ƒé˜»å¡ç­‰å¾…é˜Ÿåˆ—æœ‰ç©ºä½å†å…¥é˜Ÿ
* `Discard`â€ƒä¸¢å¼ƒæ–°ä»»åŠ¡
* `DiscardOld`â€ƒä¸¢å¼ƒæœ€è€ä»»åŠ¡ï¼ˆé˜Ÿå¤´ï¼‰ï¼Œç„¶åå…¥é˜Ÿæ–°ä»»åŠ¡
* `Throw`â€ƒæŠ›å‡ºå¼‚å¸¸ï¼Œé€šçŸ¥è°ƒç”¨è€…

#### å…³é—­ç­–ç•¥ï¼ˆShutdownPolicyï¼‰

çº¿ç¨‹æ± åœæ­¢æ—¶å¯é‡‡ç”¨ä¸åŒç­–ç•¥ï¼š

* `Graceful`â€ƒä¸æ¥æ”¶æ–°ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œé˜Ÿåˆ—åŠæ­£åœ¨è¿è¡Œä»»åŠ¡åé€€å‡º
* `Drain`â€ƒç«‹å³æ‹’ç»æ–°ä»»åŠ¡ï¼Œä½†æ‰§è¡Œé˜Ÿåˆ—ä¸­å·²æœ‰ä»»åŠ¡ï¼Œå°½å¿«é€€å‡ºï¼ˆä¸æ¸…ç©ºé˜Ÿåˆ—ï¼‰
* `CancelNow`â€ƒç«‹å³æ‹’ç»æ–°ä»»åŠ¡å¹¶ä¸¢å¼ƒé˜Ÿåˆ—ä»»åŠ¡ï¼Œå°½å¿«é€€å‡º

#### é…ç½®é€‰é¡¹ï¼ˆOptionsï¼‰

å¯é…ç½®çº¿ç¨‹æ± è¡Œä¸ºï¼ŒåŒ…æ‹¬çº¿ç¨‹æ•°é‡ã€é˜Ÿåˆ—å®¹é‡ã€ä»»åŠ¡æ‹’ç»ç­–ç•¥ç­‰ï¼š

* `coreThreads`â€ƒæœ€å°çº¿ç¨‹æ•°ï¼Œé»˜è®¤ä¸ç¡¬ä»¶å¹¶å‘æ•°ä¸€è‡´
* `maxThreads`â€ƒæœ€å¤§çº¿ç¨‹æ•°ï¼Œé»˜è®¤ä¸ç¡¬ä»¶å¹¶å‘æ•°ä¸€è‡´
* `queueCapacity`â€ƒä»»åŠ¡é˜Ÿåˆ—å®¹é‡
* `rejectPolicy`â€ƒä»»åŠ¡å…¥é˜Ÿæ‹’ç»ç­–ç•¥
* `keepAlive`â€ƒç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´
* `allowDynamicResize`â€ƒæ˜¯å¦å…è®¸åŠ¨æ€æ‰©å®¹/å›æ”¶çº¿ç¨‹
* `threadNamePrefix`â€ƒçº¿ç¨‹åå‰ç¼€
* `exceptionHandler`â€ƒä»»åŠ¡æ‰§è¡Œå¼‚å¸¸å›è°ƒ

#### è¿è¡Œæ—¶ç»Ÿè®¡ä¿¡æ¯ï¼ˆStatisticsï¼‰

çº¿ç¨‹æ± æä¾›è¯¦ç»†çš„ä»»åŠ¡å’Œçº¿ç¨‹è¿è¡Œç»Ÿè®¡ï¼š

* `submitted`â€ƒæˆåŠŸå…¥é˜Ÿä»»åŠ¡æ•°
* `rejected`â€ƒè¢«æ‹’ç»ä»»åŠ¡æ•°
* `completed`â€ƒæ‰§è¡Œå®Œæˆä»»åŠ¡æ•°
* `active`â€ƒæ­£åœ¨æ‰§è¡Œä»»åŠ¡æ•°
* `aliveThreads`â€ƒå­˜æ´»å·¥ä½œçº¿ç¨‹æ•°
* `largestPoolSize`â€ƒå†å²æœ€å¤§çº¿ç¨‹æ•°
* `peakQueueSize`â€ƒä»»åŠ¡é˜Ÿåˆ—å³°å€¼
* `lastSubmitTime`â€ƒæœ€åæäº¤ä»»åŠ¡æ—¶é—´
* `lastFinishTime`â€ƒæœ€åå®Œæˆä»»åŠ¡æ—¶é—´
* `longestTaskTime`â€ƒæœ€é•¿ä»»åŠ¡è€—æ—¶
* `arithmeticAverageTaskTime`â€ƒç®—æœ¯å¹³å‡ä»»åŠ¡è€—æ—¶
* `averageTaskTime`â€ƒæŒ‡æ•°ç§»åŠ¨å¹³å‡ä»»åŠ¡è€—æ—¶

#### ç”Ÿå‘½å‘¨æœŸæ§åˆ¶

* `ThreadPool(Options opts = Options())`â€ƒæ„é€ çº¿ç¨‹æ± å®ä¾‹ï¼Œå¯ä¼ å…¥è‡ªå®šä¹‰é…ç½®
* `~ThreadPool()`â€ƒææ„å‡½æ•°ï¼Œåœæ­¢çº¿ç¨‹æ± å¹¶æ¸…ç†èµ„æº
* `void Start()`â€ƒå¯åŠ¨çº¿ç¨‹æ± ï¼ˆå¯å¤šæ¬¡è°ƒç”¨ï¼Œä»…ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆï¼‰
* `void Shutdown(ShutdownPolicy mode = ShutdownPolicy::Graceful)`â€ƒç»Ÿä¸€åœæ­¢çº¿ç¨‹æ± 
* `bool AwaitTermination(std::chrono::milliseconds timeout)`â€ƒç­‰å¾…çº¿ç¨‹æ± ç»ˆæ­¢ï¼Œtimeout=0 è¡¨ç¤ºéé˜»å¡
* `void JoinAll()`â€ƒé˜»å¡ç­‰å¾…æ‰€æœ‰çº¿ç¨‹é€€å‡º

#### è€æ¥å£å…¼å®¹

* `void Stop()`â€ƒç­‰åŒäº `Shutdown(ShutdownPolicy::Graceful)`ï¼Œç”¨äºå¹³æ»‘åœæ­¢çº¿ç¨‹æ± ï¼Œä¿ç•™è€ä»£ç è°ƒç”¨æ–¹å¼ã€‚
* `void ShutdownNow()`â€ƒç­‰åŒäº `Shutdown(ShutdownPolicy::CancelNow)`ï¼Œç”¨äºç«‹å³åœæ­¢çº¿ç¨‹æ± å¹¶ä¸¢å¼ƒé˜Ÿåˆ—ä»»åŠ¡ï¼Œä¿ç•™è€ä»£ç è°ƒç”¨æ–¹å¼ã€‚

#### æäº¤ä»»åŠ¡

çº¿ç¨‹æ± æ”¯æŒå¤šç§ä»»åŠ¡æäº¤æ–¹å¼ï¼š

* `Submit(F&& f, Args&&... args)`â€ƒæäº¤æœ‰è¿”å›å€¼çš„ä»»åŠ¡ï¼Œè¿”å› `std::future`
* `Post(F&& f, Args&&... args)`â€ƒæäº¤æ— è¿”å›å€¼ä»»åŠ¡
* `PostNoArg(std::function<void()> fn)`â€ƒæäº¤æ— è¿”å›å€¼ã€æ— å‚æ•°çš„ä»»åŠ¡

ä»»åŠ¡æäº¤éµå¾ªé…ç½®çš„ `RejectPolicy`ï¼Œå¯åœ¨å¤±è´¥æ—¶é€šè¿‡ `exceptionHandler` å›è°ƒå¤„ç†å¼‚å¸¸ã€‚

#### æŸ¥è¯¢ä¸ç›‘æ§

* `size_t GetQueueSize() const`â€ƒå½“å‰ä»»åŠ¡é˜Ÿåˆ—å¤§å°
* `size_t GetActiveCount() const`â€ƒæ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹æ•°
* `size_t GetThreadCount() const`â€ƒæ´»è·ƒçº¿ç¨‹æ•°
* `bool IsRunning() const`â€ƒçº¿ç¨‹æ± æ˜¯å¦è¿è¡Œ
* `Statistics Snapshot() const`â€ƒè·å–çº¿ç¨‹æ± å¿«ç…§ç»Ÿè®¡ä¿¡æ¯
* `size_t IetRejectedCount() const`â€ƒè¢«æ‹’ç»ä»»åŠ¡æ•°é‡
* `size_t IetTotalTasksSubmitted() const`â€ƒæ€»æäº¤ä»»åŠ¡æ•°
* `size_t IetCompletedCount() const`â€ƒå®Œæˆä»»åŠ¡æ•°
* `size_t IetLargestPoolSize() const`â€ƒå†å²æœ€å¤§çº¿ç¨‹æ•°
* `size_t IetPeakQueueSize() const`â€ƒé˜Ÿåˆ—å³°å€¼

#### ä½¿ç”¨ç¤ºä¾‹

```cpp
#pragma once
#include <LikesProgram/ThreadPool.hpp>
#include <LikesProgram/Logger.hpp>
#include <LikesProgram/String.hpp>

namespace ThreadPoolTest {
	void Test() {        // åˆå§‹åŒ–æ—¥å¿—
        auto& logger = LikesProgram::Logger::Instance();
#ifdef _WIN32
        logger.SetEncoding(LikesProgram::String::Encoding::GBK);
#endif
        logger.SetLevel(LikesProgram::Logger::LogLevel::Trace);
        // å†…ç½®æ§åˆ¶å°è¾“å‡º Sink
        logger.AddSink(LikesProgram::Logger::CreateConsoleSink()); // è¾“å‡ºåˆ°æ§åˆ¶å°

        LikesProgram::ThreadPool::Options optins = {
        2,   // æœ€å°çº¿ç¨‹æ•°
        4,   // çº¿ç¨‹æ•°ä¸Šé™
        2048,// é˜Ÿåˆ—é•¿åº¦é™åˆ¶
        LikesProgram::ThreadPool::RejectPolicy::Block, // ä»»åŠ¡æ‹’ç»ç­–ç•¥
        std::chrono::milliseconds(100), // ç©ºé—²çº¿ç¨‹å›æ”¶æ—¶é—´
        true, // æ˜¯å¦å¯ç”¨åŠ¨æ€æ‰©å®¹ã€ç¼©å®¹
        };

        // åˆ›å»ºçº¿ç¨‹æ± 
        // LikesProgram::ThreadPool pool(optins); // ä½¿ç”¨è‡ªå®šä¹‰å‚æ•°åˆ›å»ºçº¿ç¨‹æ± 
        LikesProgram::ThreadPool pool; // ä½¿ç”¨é»˜è®¤å‚æ•°åˆ›å»ºçº¿ç¨‹æ± 
        pool.Start();

        // æäº¤ä¸€äº›ä»»åŠ¡
        for (int i = 0; i < 30; i++) {
            // æäº¤æ— è¿”å›å€¼æ— å‚æ•°çš„ä»»åŠ¡
            pool.PostNoArg([i]() {
                LOG_DEBUG(u"PostNoArgï¼šHello from worker");
            });

            // æäº¤æ— è¿”å›å€¼æœ‰å‚æ•°çš„ä»»åŠ¡
            pool.Post([](LikesProgram::String message) {
                std::this_thread::sleep_for(std::chrono::milliseconds(100));
                LikesProgram::String out;
                out.Append(message);
                out.Append(u"ï¼šHello from worker");
                LOG_DEBUG(out);
            }, u"Post");

            // æäº¤æœ‰è¿”å›å€¼æœ‰å‚æ•°çš„ä»»åŠ¡
            auto poolOut = pool.Submit([i](LikesProgram::String message) {
                std::this_thread::sleep_for(std::chrono::milliseconds(100));
                LOG_DEBUG(message);
                LikesProgram::String out;
                out.Append(message);
                out.Append(u"ï¼š[");
                out.Append(LikesProgram::String(std::to_string(i)));
                out.Append(u"] Out");
                return out;
            }, u"Submit");

            // ç­‰å¾…ä»»åŠ¡å®Œæˆ, å¹¶è·å–ç»“æœï¼ˆè¿™é‡Œä¼šæ‹–æ…¢ä»»åŠ¡æ•ˆç‡ï¼‰
            // LOG_WARN(poolOut.get());

            if (i % 10 == 0) {
                LOG_WARN(poolOut.get()); // æ¯éš”10æ¬¡è¾“å‡ºä¸€æ¬¡ Submit çš„è¿è¡Œç»“æœ

                // è·å–å¿«ç…§ç»Ÿè®¡ä¿¡æ¯
                LikesProgram::ThreadPool::Statistics stats = pool.Snapshot();
                LOG_WARN(stats.ToString());
            }
        }

        // å…³é—­çº¿ç¨‹æ± 
        pool.Shutdown();
        if (pool.AwaitTermination(std::chrono::milliseconds(1000))) { // ç­‰å¾…çº¿ç¨‹æ± å…³é—­
            LOG_WARN(u"çº¿ç¨‹æ± å·²å…³é—­");
        } else {
            LOG_ERROR(u"çº¿ç¨‹æ± å…³é—­è¶…æ—¶");
        }

        // è·å–å¿«ç…§ç»Ÿè®¡ä¿¡æ¯
        LikesProgram::ThreadPool::Statistics stats = pool.Snapshot();
        LOG_WARN(stats.ToString());

        std::this_thread::sleep_for(std::chrono::seconds(1)); // ç»™åå°çº¿ç¨‹ä¸€ç‚¹æ—¶é—´è¾“å‡º
        logger.Shutdown();
	}
}
```

### 8ã€Configï¼šé…ç½®ç®¡ç†
